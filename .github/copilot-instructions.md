---
description: 'copilot-instructions'
applyTo: '**'
---

# Copilot instructions for this repository

This file tells AI assistants (Copilot-style agents) how to work effectively in this project. Follow the same conventions used by the files in `.github/instructions/` and the project's Memory Bank.

Core principles

- Always read the Memory Bank first (`/memory/*`). It contains the single source of truth for design, tasks, and active context.
- Use the todo system: create a todo plan before changing code for any multi-step task (3+ steps). Update todos as you progress.
- Prefer small, well-tested changes. Add tests for behavior you introduce or modify.
- Explain WHY in comments and documentation. Keep code self-explanatory; add comments only for intent, constraints, or non-obvious choices.

Editing files

- Use the repository's patch workflow (the agent will use the `apply_patch` format). Keep changes minimal and focused. Do not reformat unrelated files.
- When adding files, use clear, short filenames and place long-running or design artifacts in `/memory/` per existing conventions.
- Never print raw patch diffs to the user; use the repository tools to apply patches.

Build, lint, tests

- Before claiming success, run the project's tests and linters where practical. Fix issues introduced by your change.
- If a build fails due to unrelated pre-existing issues, document the failure and proceed with targeted fixes only when safe.

Tasks and Memory

- Store task artifacts, designs, and decisions under `/memory/`:
  - `memory/tasks/` for task files (use unique `TASK###-name.md` IDs). Update `_index.md`.
  - `memory/designs/` for designs (use unique `DES###-name.md`).
  - Update `memory/activeContext.md` and `memory/progress.md` when making progress.
- When creating or updating tasks, follow the spec-driven workflow in `.github/instructions/spec-driven-workflow-v1.instructions.md`.

Testing etiquette

- Add unit tests for new logic or bug fixes using the project's test framework (Vitest/Playwright where appropriate).
- Keep tests deterministic and fast. For Playwright tests follow the `.github/instructions/playwright-typescript.instructions.md` guidance (use role-based locators and auto-retrying assertions).

Security and secrets

- Never expose secrets, API keys, or local credentials in commits or code. Use environment variables and document required env vars in memory or README.

PR & commit guidance

- Use small commits with descriptive messages. Each commit should be testable and reversible.
- Add a short PR summary: 1) Goal 2) Key changes (files) 3) Validation (tests run / manual checks).

Agent workflow checklist (minimum)

1. Read `/memory/activeContext.md` and `memory/tasks/_index.md`.
2. Create a todo plan with `mcp_todos_todo_write` if work requires 3+ steps.
3. Mark one todo as `in_progress` and begin implementation.
4. Apply patches with `apply_patch` for code changes.
5. Run tests (`runTests`) for modified files or full test suite when necessary.
6. Fix any test/lint issues generated by changes.
7. Update Memory Bank files and task status.
8. Mark todo `completed` and provide a concise completion summary.

Quality expectations

- Code compiles and tests pass for changed areas.
- Changes are minimal and follow project conventions and TypeScript settings.
- Tests include happy path and at least one edge case for non-trivial logic.

If blocked

- Re-run the ANALYZE â†’ DESIGN loop from `.github/instructions/spec-driven-workflow-v1.instructions.md`.
- If external information is required, document the exact missing piece and propose a safe fallback or ask the maintainers.

Contact & review

- When in doubt, open a draft PR and ask maintainers for a quick review. Add links to memory/task files and the validation steps you ran.

Example short checklist for a small bugfix

- Read `memory/tasks/_index.md` to check for related tasks.
- Create a one-line todo and mark `in_progress`.
- Apply a focused patch that fixes the bug.
- Run the related unit tests. Add a new test if none exists.
- Update memory and mark todo `completed` with a brief note.

This repository values clear, test-backed, and well-documented changes. Follow the Memory Bank conventions and the spec-driven workflow for non-trivial work.
